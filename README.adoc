# VueJS starter

## Base

so the base for this project is the ASP.NET Core vue SPA template that ships
with 2.0 of ASP.NET core.

## Why

Basically digging around and tweaking things, found a bunch of things that
could be improved in general. Should help future me when I want to build an
actual web UI. A few of the things 

. Upgraded to latest Vue(2.3.2 -> 2.4.2) and Typescript (2.3 -> 2.4)
. Added component unit test along with code coverage for typescript.
. Got rid of `awesome-typescript-loader` and got back `ts-loader` which lets
you import .vue components easily.
. Added examples of simple components,
https://vuejs.org/v2/guide/components.html#Named-Slots[slots] and
https://vuex.vuejs.org/en/intro.html[vuex].
. Added examples of bundling components into chunks -
https://vuejs.org/v2/guide/components.html#Async-Components[Vue Async
Component] + https://webpack.js.org/guides/code-splitting/[webpack's code
splitting] feature.
. Hooked in babel-loader in webpack - so ts transpilation path is 
`TS ---ts-loader---> ES2015 ----babel-loader--> ES5`. This lets us use the dynamic 
import statement in TS 2.4 for defining async components.
. Removed .vue.html extension and named back to .vue - works better with the
https://marketplace.visualstudio.com/items?itemName=octref.vetur[vetur] plugin
under VS Code.

## Getting started

. Clone this repo
. Run `npm install`
. `set ASPNETCORE_ENVIRONMENT=Development`
. Run it with `dotnet run`
. Visit `localhost:5000/`

### To run client side tests

After you have done `npm install` run `npm run test`

## Notes - Unit testing and code coverage.

Getting Karma, webpack and code coverage to play nice with each other took some doing.
As of this writing (Sep 2017), karma coverage was broken when used with ts transpilation and html report
generation fails with error. 

. For getting code coverage across all your code, you need to create an index.js which pulls in
all your tests and all your sources.
. In karma.conf.js, we set `env={test:1}` and then require our webpack conf. Within webpack config,
we instrument sources with `istanbul-instrumenter-loader` based on test being true.
. In a test build, we also add a rule for building ts files under `test` without the instrumenter.
. In karma config, we replace `karma-coverage` with
https://github.com/mattlewis92/karma-coverage-istanbul-reporter[`karma-coverage-istanbul-reporter`]
